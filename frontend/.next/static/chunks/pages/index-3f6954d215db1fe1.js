(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7697:function(n,e,t){"use strict";var r=t(2640),i=t(7294),o=t(4538),u=t(9673),c=t(1889),a=t(9473),l=t(2167),s=t(4324),d=t(5893);e.Z=function(){var n=(0,a.v9)(function(n){return n.post}),e=n.imagePaths,t=n.addPostDone,f=(0,a.I0)(),p=(0,s.Z)(""),h=(0,r.Z)(p,3),m=h[0],v=h[1],x=h[2];(0,i.useEffect)(function(){t&&x("")},[t]);var w=(0,i.useCallback)(function(){if(!m||!m.trim())return alert("게시글을 작성하세요.");var n=new FormData;e.forEach(function(e){n.append("image",e)}),n.append("content",m),f({type:l.z9,data:n})},[m,e]),g=(0,i.useRef)(),E=(0,i.useCallback)(function(){g.current.click()},[g.current]),_=(0,i.useCallback)(function(n){var e=new FormData;[].forEach.call(n.target.files,function(n){e.append("image",n)}),f({type:l.QA,data:e})},[]),j=(0,i.useCallback)(function(n){return function(){f({type:l.Po,data:{imagePath:n}})}},[]);return(0,d.jsxs)(o.Z,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onFinish:w,children:[(0,d.jsx)(u.Z.TextArea,{value:m,onChange:v,maxLength:140,placeholder:"어떤 신기한 일이 있었나요?"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:g,onChange:_}),(0,d.jsx)(c.Z,{onClick:E,children:"이미지 업로드"}),(0,d.jsx)(c.Z,{type:"primary",style:{float:"right"},htmlType:"submit",children:"쨱짹"})]}),(0,d.jsx)("div",{children:null==e?void 0:e.map(function(n){return(0,d.jsxs)("div",{style:{display:"inline-block"},children:[(0,d.jsx)("img",{src:n.replace(/\/thumb\//,"/original/"),style:{width:"200px"},alt:n}),(0,d.jsx)("div",{children:(0,d.jsx)(c.Z,{onClick:j(n),children:"제거"})})]},n)})})]})}},8265:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return s}});var r=t(7294),i=t(9473),o=t(5616),u=t(7187),c=t(7697),a=t(2167),l=t(5893),s=!0;e.default=function(){var n=(0,i.I0)(),e=(0,r.useRef)(!1),t=(0,i.v9)(function(n){return n.user}).me,s=(0,i.v9)(function(n){return n.post}),d=s.mainPosts,f=s.hasMorePost,p=s.loadPostsLoading,h=s.retweetError;return(0,r.useEffect)(function(){e.current?h&&alert(h):e.current=!0},[h]),(0,r.useEffect)(function(){function e(){if(!f)return window.removeEventListener("scroll",e);if(!p&&window.scrollY+document.documentElement.clientHeight+500>document.documentElement.scrollHeight){var t,r=null===(t=d[d.length-1])||void 0===t?void 0:t.id;n({type:a.aO,lastId:r})}}return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}},[f,p,d]),(0,l.jsxs)(o.Z,{children:[t&&(0,l.jsx)(c.Z,{}),d.map(function(n){return(0,l.jsx)(u.Z,{post:n},n.id)})]})}},5557:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8265)}])}},function(n){n.O(0,[885,661,337,775,538,774,888,179],function(){return n(n.s=5557)}),_N_E=n.O()}]);