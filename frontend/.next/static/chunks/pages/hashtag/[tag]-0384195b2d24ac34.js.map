{"version":3,"file":"static/chunks/pages/hashtag/[tag]-0384195b2d24ac34.js","mappings":"4NA4DAA,CAAAA,EAAA,QAhDA,UAAmB,CACjB,IAAMC,EAAWC,CAAAA,EAAAA,EAAAA,EAAAA,IAETC,EAAQC,CADDC,EAAAA,EAAAA,SAAAA,IACQC,KAAvB,CAAQH,GAAR,CACAI,EAA+DC,CAAAA,EAAAA,EAAAA,EAAAA,EAAY,SAACC,CAAD,SAAWA,EAAMC,IAAjB,GAAnEC,EAARJ,EAAQI,WAAR,CAAqBC,EAArBL,EAAqBK,uBAArB,CAA8CC,EAA9CN,EAA8CM,YAA9C,CAkBA,MAhBAC,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,UAAM,CACd,SAASC,GAAiB,CACxB,GAAI,CAACJ,EAAa,OAAOK,OAAOC,mBAAP,CAA2B,SAAUF,EAA5C,CAClB,IAAIH,GACAI,OAAOE,OAAP,CAAiBC,SAASC,eAAT,CAAyBC,YAA1C,CAAyD,IAAMF,SAASC,eAAT,CAAyBE,YAA5F,CAA0G,CACxG,IADwGC,EAClGC,EAAM,OAAAD,CAAAA,EAAGV,CAAY,CAACA,EAAaY,MAAb,CAAsB,EAAtC,GAAAF,KAAA,IAAAA,EAAA,OAAGA,EAAuCG,EAAtD,CACAzB,EAAS,CACP0B,KAAMC,EAAAA,EADC,CAEPC,KAAM,CAAEC,QAAS3B,EAAKqB,OAAAA,CAAhB,CAFC,EAIV,CAP4B,CAU/B,OADAR,OAAOe,gBAAP,CAAwB,SAAUhB,GAC3B,kBAAMC,OAAOC,mBAAP,CAA2B,SAAUF,EAA3C,CACR,EAAE,CAACJ,EAAaC,EAAyBC,EAAcV,EAd/C,EAiBP,GAAA6B,EAAAC,GAAA,EAACC,EAAAC,CAAD,EAAAC,SACGvB,EAAawB,GAAb,CAAiB,SAACC,CAAD,QAChB,GAAAN,EAAAC,GAAA,EAACM,EAAAJ,CAAD,EAAqBzB,KAAM4B,CAA3B,EAAeA,EAAEZ,EAAjB,CADgB,EADpB,EAMH,wBCxCD,CAAAV,OAAAwB,QAAA,CAAAxB,OAAAwB,QAAA,MAAAC,IAAA,EACA,iBACA,WACA,OAAeC,EAAQ,KACvB,EACA","sources":["webpack://_N_E/./pages/hashtag/[tag].js","webpack://_N_E/?9255","webpack://_N_E/<anon>"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport { END } from 'redux-saga';\r\n\r\nimport axios from 'axios';\r\nimport { LOAD_HASHTAG_POSTS_REQUEST } from '../../reducers/post';\r\nimport PostCard from '../../components/PostCard';\r\nimport wrapper from '../../store/configureStore';\r\nimport { LOAD_MY_INFO_REQUEST } from '../../reducers/user';\r\nimport AppLayout from '../../components/Layout/AppLayout';\r\n\r\nfunction Hashtag() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { tag } = router.query;\r\n  const { hasMorePost, loadHashtagPostsLoading, hashtagPosts } = useSelector((state) => state.post);\r\n\r\n  useEffect(() => {\r\n    function infiniteScroll() {\r\n      if (!hasMorePost) return window.removeEventListener('scroll', infiniteScroll);\r\n      if (loadHashtagPostsLoading) return;\r\n      if (window.scrollY + document.documentElement.clientHeight + 500 > document.documentElement.scrollHeight) {\r\n        const lastId = hashtagPosts[hashtagPosts.length - 1]?.id;\r\n        dispatch({\r\n          type: LOAD_HASHTAG_POSTS_REQUEST,\r\n          data: { hashtag: tag, lastId },\r\n        });\r\n      }\r\n    }\r\n    window.addEventListener('scroll', infiniteScroll);\r\n    return () => window.removeEventListener('scroll', infiniteScroll);\r\n  }, [hasMorePost, loadHashtagPostsLoading, hashtagPosts, tag]);\r\n\r\n  return (\r\n    <AppLayout>\r\n      {hashtagPosts.map((c) => (\r\n        <PostCard key={c.id} post={c} />\r\n      ))}\r\n    </AppLayout>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\r\n  const { cookie } = context.req.headers;\r\n  axios.defaults.headers.Cookie = '';\r\n  if (cookie) {\r\n    axios.defaults.headers.Cookie = cookie;\r\n  }\r\n  context.store.dispatch({\r\n    type: LOAD_MY_INFO_REQUEST,\r\n  });\r\n  context.store.dispatch({\r\n    type: LOAD_HASHTAG_POSTS_REQUEST,\r\n    data: { hashtag: context.params.tag },\r\n  });\r\n  context.store.dispatch(END);\r\n  await context.store.sagaTask.toPromise();\r\n});\r\n\r\nexport default Hashtag;\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return require(\"private-next-pages/hashtag/[tag].js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/hashtag/[tag]\"])\n      });\n    }\n  "],"names":["__webpack_exports__","dispatch","useDispatch","tag","router","useRouter","query","_useSelector","useSelector","state","post","hasMorePost","loadHashtagPostsLoading","hashtagPosts","useEffect","infiniteScroll","window","removeEventListener","scrollY","document","documentElement","clientHeight","scrollHeight","_hashtagPosts","lastId","length","id","type","LOAD_HASHTAG_POSTS_REQUEST","data","hashtag","addEventListener","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__","jsx","_components_Layout_AppLayout__WEBPACK_IMPORTED_MODULE_5__","Z","children","map","c","_components_PostCard__WEBPACK_IMPORTED_MODULE_4__","__NEXT_P","push","__webpack_require__"],"sourceRoot":""}