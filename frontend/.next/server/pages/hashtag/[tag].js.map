{"version":3,"file":"../pages/hashtag/[tag].js","mappings":"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","sources":["webpack://react-nodebird/./pages/hashtag/[tag].js","webpack://react-nodebird/external commonjs \"@ant-design/icons\"","webpack://react-nodebird/external commonjs \"antd\"","webpack://react-nodebird/external commonjs \"moment\"","webpack://react-nodebird/external commonjs \"next-redux-wrapper\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/app-router-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/head-manager-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/is-plain-object.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/mitt.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/page-path/denormalize-page-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/add-path-prefix.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/compare-states.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/format-next-pathname-info.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/format-url.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/get-next-pathname-info.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/is-bot.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/parse-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/path-has-prefix.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/remove-trailing-slash.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/resolve-rewrites.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/utils.js\"","webpack://react-nodebird/external commonjs \"next/router\"","webpack://react-nodebird/external commonjs \"react\"","webpack://react-nodebird/external commonjs \"react-dom\"","webpack://react-nodebird/external commonjs \"react-redux\"","webpack://react-nodebird/external commonjs \"react-slick\"","webpack://react-nodebird/external commonjs \"react/jsx-runtime\"","webpack://react-nodebird/external commonjs \"redux\"","webpack://react-nodebird/external commonjs \"redux-devtools-extension\"","webpack://react-nodebird/external commonjs \"redux-saga/effects\"","webpack://react-nodebird/external commonjs \"styled-components\"","webpack://react-nodebird/external module \"axios\"","webpack://react-nodebird/external module \"immer\"","webpack://react-nodebird/external module \"redux-saga\""],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useRouter } from 'next/router';\r\nimport { END } from 'redux-saga';\r\n\r\nimport axios from 'axios';\r\nimport { LOAD_HASHTAG_POSTS_REQUEST } from '../../reducers/post';\r\nimport PostCard from '../../components/PostCard';\r\nimport wrapper from '../../store/configureStore';\r\nimport { LOAD_MY_INFO_REQUEST } from '../../reducers/user';\r\nimport AppLayout from '../../components/Layout/AppLayout';\r\n\r\nfunction Hashtag() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { tag } = router.query;\r\n  const { hasMorePost, loadHashtagPostsLoading, hashtagPosts } = useSelector((state) => state.post);\r\n\r\n  useEffect(() => {\r\n    function infiniteScroll() {\r\n      if (!hasMorePost) return window.removeEventListener('scroll', infiniteScroll);\r\n      if (loadHashtagPostsLoading) return;\r\n      if (window.scrollY + document.documentElement.clientHeight + 500 > document.documentElement.scrollHeight) {\r\n        const lastId = hashtagPosts[hashtagPosts.length - 1]?.id;\r\n        dispatch({\r\n          type: LOAD_HASHTAG_POSTS_REQUEST,\r\n          data: { hashtag: tag, lastId },\r\n        });\r\n      }\r\n    }\r\n    window.addEventListener('scroll', infiniteScroll);\r\n    return () => window.removeEventListener('scroll', infiniteScroll);\r\n  }, [hasMorePost, loadHashtagPostsLoading, hashtagPosts, tag]);\r\n\r\n  return (\r\n    <AppLayout>\r\n      {hashtagPosts.map((c) => (\r\n        <PostCard key={c.id} post={c} />\r\n      ))}\r\n    </AppLayout>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\r\n  const { cookie } = context.req.headers;\r\n  axios.defaults.headers.Cookie = '';\r\n  if (cookie) {\r\n    axios.defaults.headers.Cookie = cookie;\r\n  }\r\n  context.store.dispatch({\r\n    type: LOAD_MY_INFO_REQUEST,\r\n  });\r\n  context.store.dispatch({\r\n    type: LOAD_HASHTAG_POSTS_REQUEST,\r\n    data: { hashtag: context.params.tag },\r\n  });\r\n  context.store.dispatch(END);\r\n  await context.store.sagaTask.toPromise();\r\n});\r\n\r\nexport default Hashtag;\r\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"moment\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/shared/lib/app-router-context.js\");","module.exports = require(\"next/dist/shared/lib/head-manager-context.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/is-plain-object.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/page-path/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/add-path-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/compare-states.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-bot.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-path.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/path-has-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/remove-trailing-slash.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/resolve-rewrites.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-slick\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");","module.exports = import(\"axios\");;","module.exports = import(\"immer\");;","module.exports = import(\"redux-saga\");;"],"names":["React","useEffect","useDispatch","useSelector","useRouter","END","axios","LOAD_HASHTAG_POSTS_REQUEST","PostCard","wrapper","LOAD_MY_INFO_REQUEST","AppLayout","Hashtag","dispatch","router","tag","query","hasMorePost","loadHashtagPostsLoading","hashtagPosts","state","post","infiniteScroll","window","removeEventListener","scrollY","document","documentElement","clientHeight","scrollHeight","lastId","length","id","type","data","hashtag","addEventListener","map","c","getServerSideProps","context","cookie","req","headers","defaults","Cookie","store","params","sagaTask","toPromise"],"sourceRoot":""}