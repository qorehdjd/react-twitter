{"version":3,"file":"../pages/signup.js","mappings":"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","sources":["webpack://react-nodebird/./pages/signup.js","webpack://react-nodebird/external commonjs \"antd\"","webpack://react-nodebird/external commonjs \"next-redux-wrapper\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/app-router-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/head-manager-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/is-plain-object.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/mitt.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/page-path/denormalize-page-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router-context.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/add-path-prefix.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/compare-states.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/format-next-pathname-info.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/format-url.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/get-next-pathname-info.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/is-bot.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/parse-path.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/path-has-prefix.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/remove-trailing-slash.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/resolve-rewrites.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-nodebird/external commonjs \"next/dist/shared/lib/utils.js\"","webpack://react-nodebird/external commonjs \"next/head\"","webpack://react-nodebird/external commonjs \"next/router\"","webpack://react-nodebird/external commonjs \"react\"","webpack://react-nodebird/external commonjs \"react-dom\"","webpack://react-nodebird/external commonjs \"react-redux\"","webpack://react-nodebird/external commonjs \"react/jsx-runtime\"","webpack://react-nodebird/external commonjs \"redux\"","webpack://react-nodebird/external commonjs \"redux-devtools-extension\"","webpack://react-nodebird/external commonjs \"redux-saga/effects\"","webpack://react-nodebird/external commonjs \"styled-components\"","webpack://react-nodebird/external module \"axios\"","webpack://react-nodebird/external module \"immer\"","webpack://react-nodebird/external module \"redux-saga\""],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport Head from 'next/head';\r\nimport {\r\n  Form, Input, Checkbox, Button,\r\n} from 'antd';\r\nimport styled from 'styled-components';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Router from 'next/router';\r\n\r\nimport axios from 'axios';\r\nimport { END } from 'redux-saga';\r\nimport AppLayout from '../components/Layout/AppLayout';\r\nimport useInput from '../hooks/useInput';\r\nimport { LOAD_MY_INFO_REQUEST, SIGN_UP_REQUEST } from '../reducers/user';\r\nimport wrapper from '../store/configureStore';\r\n\r\nconst ErrorMessage = styled.div`\r\n  color: red;\r\n`;\r\n\r\nfunction Signup() {\r\n  const dispatch = useDispatch();\r\n  const didMount = useRef(false);\r\n  const { signUpLoading, signUpDone, signUpError, me } = useSelector((state) => state.user);\r\n\r\n  const [email, onChangeEmail] = useInput('');\r\n  const [nickname, onChangeNickname] = useInput('');\r\n  const [password, onChangePassword] = useInput('');\r\n\r\n  const [passwordCheck, setChangePasswordCheck] = useState('');\r\n  const [passwordError, setPasswordError] = useState(false);\r\n  const [term, setTerm] = useState('');\r\n  const [termError, setTermError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (didMount.current) {\r\n      if (signUpDone) Router.replace('/');\r\n      if (signUpError) alert(signUpError);\r\n    } else {\r\n      didMount.current = true;\r\n    }\r\n  }, [signUpDone, signUpError]);\r\n\r\n  useEffect(() => {\r\n    if (me) Router.replace('/'); // push는 뒤로가기했을 때 이전페이지로 가지지만 replace는 이전페이지로 안간다\r\n  }, [me]);\r\n\r\n  const onChangePasswordCheck = useCallback(\r\n    (e) => {\r\n      setChangePasswordCheck(e.target.value);\r\n      setPasswordError(password !== e.target.value);\r\n    },\r\n    [password],\r\n  );\r\n\r\n  const onChangeTerm = useCallback((e) => {\r\n    setTerm(e.target.checked);\r\n    setTermError(false);\r\n  }, []);\r\n\r\n  const onSubmit = useCallback(() => {\r\n    if (password !== passwordCheck) {\r\n      return setPasswordError(true);\r\n    }\r\n    if (!term) {\r\n      return setTermError(true);\r\n    }\r\n    console.log(email, nickname, password);\r\n    dispatch({\r\n      type: SIGN_UP_REQUEST,\r\n      data: { email, password, nickname },\r\n    });\r\n  }, [email, password, passwordCheck, term]);\r\n\r\n  return (\r\n    <AppLayout>\r\n      <Head>\r\n        <title>회원 가입 | NodeBird</title>\r\n      </Head>\r\n      <Form onFinish={onSubmit}>\r\n        <div>\r\n          <label htmlFor=\"user-email\">이메일</label>\r\n          <br />\r\n          <Input\r\n            name=\"user-email\"\r\n            value={email}\r\n            required\r\n            onChange={onChangeEmail}\r\n            type=\"email\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"user-nickname\">닉네임</label>\r\n          <br />\r\n          <Input\r\n            name=\"user-nickname\"\r\n            value={nickname}\r\n            required\r\n            onChange={onChangeNickname}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"user-password\">비밀번호</label>\r\n          <br />\r\n          <Input\r\n            name=\"user-password\"\r\n            type=\"password\"\r\n            value={password}\r\n            required\r\n            onChange={onChangePassword}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"user-password-check\">비밀번호확인</label>\r\n          <br />\r\n          <Input\r\n            name=\"user-password-check\"\r\n            type=\"password\"\r\n            value={passwordCheck}\r\n            required\r\n            onChange={onChangePasswordCheck}\r\n          />\r\n          {passwordError && (\r\n            <ErrorMessage>비밀번호가 일치하지 않습니다</ErrorMessage>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <Checkbox name=\"user-term\" checked={term} onChange={onChangeTerm}>\r\n            모든 약관에 동의합니다.\r\n          </Checkbox>\r\n          {termError && <ErrorMessage>약관에 동의하셔야 합니다.</ErrorMessage>}\r\n        </div>\r\n        <div style={{ marginTop: 10 }}>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={signUpLoading}>\r\n            가입하기\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    </AppLayout>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps = wrapper.getStaticProps(async (context) => { // 로그인 여부에따라 빈페이지지냐 페이지를 보여주냐 달라지므로 getServerSideProps사용\r\n  const { cookie } = context.req.headers;\r\n  axios.defaults.headers.Cookie = '';\r\n  if (cookie) {\r\n    axios.defaults.headers.Cookie = cookie;\r\n  }\r\n  context.store.dispatch({ // 로그인이 잠깐 풀려보이는 것을 방지\r\n    type: LOAD_MY_INFO_REQUEST,\r\n  });\r\n  context.store.dispatch(END);\r\n  await context.store.sagaTask.toPromise();\r\n});\r\n\r\nexport default Signup;\r\n","module.exports = require(\"antd\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/shared/lib/app-router-context.js\");","module.exports = require(\"next/dist/shared/lib/head-manager-context.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/is-plain-object.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/page-path/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/add-path-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/compare-states.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-bot.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-path.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/path-has-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/remove-trailing-slash.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/resolve-rewrites.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");","module.exports = import(\"axios\");;","module.exports = import(\"immer\");;","module.exports = import(\"redux-saga\");;"],"names":["React","useCallback","useEffect","useRef","useState","Head","Form","Input","Checkbox","Button","styled","useDispatch","useSelector","Router","axios","END","AppLayout","useInput","LOAD_MY_INFO_REQUEST","SIGN_UP_REQUEST","wrapper","ErrorMessage","div","Signup","dispatch","didMount","signUpLoading","signUpDone","signUpError","me","state","user","email","onChangeEmail","nickname","onChangeNickname","password","onChangePassword","passwordCheck","setChangePasswordCheck","passwordError","setPasswordError","term","setTerm","termError","setTermError","current","replace","alert","onChangePasswordCheck","e","target","value","onChangeTerm","checked","onSubmit","console","log","type","data","marginTop","getServerSideProps","getStaticProps","context","cookie","req","headers","defaults","Cookie","store","sagaTask","toPromise"],"sourceRoot":""}